<? function showTags($tags) { $tags = explode(' ',$tags); $str = ''; foreach($tags as $key=>$val) { $tag = trim($val); $str .= '<font color="Gray"><a href="'.url('show/module/'.MODULE_NAME.'/name/'.urlencode($tag), 'Tags').'">'.$tag.'</a></font>  '; } return $str; } function getTitleSize($count) { $sc = (ceil($count/10)+11); if ($sc>33) $sc=33; $size = $sc.'px'; return $size; } function rand_color() { return '#'.rcolor().rcolor().rcolor(); } function rcolor() { $rand = rand(0,255); return sprintf("%02X","$rand"); } function toDate($time,$format='Y年m月d日 H:i:s') { if( empty($time)) { return ''; } $format = str_replace('#',':',$format); return date(auto_charset($format),$time); } function getmenu(){ $dao = D('Menu'); $menu = $dao->findAll('','*','order DESC',8); dump($menu); return $menu; } function ubb($Text) { $Text=trim($Text); $Text=preg_replace("/\\t/is","  ",$Text); $Text=preg_replace("/\[hr\]/is","<hr>",$Text); $Text=preg_replace("/\[separator\]/is","<br/>",$Text); $Text=preg_replace("/\[h1\](.+?)\[\/h1\]/is","<h1>\\1</h1>",$Text); $Text=preg_replace("/\[h2\](.+?)\[\/h2\]/is","<h2>\\1</h2>",$Text); $Text=preg_replace("/\[h3\](.+?)\[\/h3\]/is","<h3>\\1</h3>",$Text); $Text=preg_replace("/\[h4\](.+?)\[\/h4\]/is","<h4>\\1</h4>",$Text); $Text=preg_replace("/\[h5\](.+?)\[\/h5\]/is","<h5>\\1</h5>",$Text); $Text=preg_replace("/\[h6\](.+?)\[\/h6\]/is","<h6>\\1</h6>",$Text); $Text=preg_replace("/\[center\](.+?)\[\/center\]/is","<center>\\1</center>",$Text); $Text=preg_replace("/\[url\](.+?)\[\/url\]/is","<a href=\"\\1\" target='_blank'>\\1</a>",$Text); $Text=preg_replace("/\[url=(http:\/\/.+?)\](.+?)\[\/url\]/is","<a href='\\1' target='_blank'>\\2</a>",$Text); $Text=preg_replace("/\[url=(.+?)\](.+?)\[\/url\]/is","<a href=\\1>\\2</a>",$Text); $Text=preg_replace("/\[img\](.+?)\[\/img\]/is","<img src=\\1>",$Text); $Text=preg_replace("/\[img\s(.+?)\](.+?)\[\/img\]/is","<img \\1 src=\\2>",$Text); $Text=preg_replace("/\[color=(.+?)\](.+?)\[\/color\]/is","<font color=\\1>\\2</font>",$Text); $Text=preg_replace("/\[colorTxt\](.+?)\[\/colorTxt\]/eis","color_txt('\\1')",$Text); $Text=preg_replace("/\[style=(.+?)\](.+?)\[\/style\]/is","<div class='\\1'>\\2</div>",$Text); $Text=preg_replace("/\[size=(.+?)\](.+?)\[\/size\]/is","<font size=\\1>\\2</font>",$Text); $Text=preg_replace("/\[sup\](.+?)\[\/sup\]/is","<sup>\\1</sup>",$Text); $Text=preg_replace("/\[sub\](.+?)\[\/sub\]/is","<sub>\\1</sub>",$Text); $Text=preg_replace("/\[pre\](.+?)\[\/pre\]/is","<pre>\\1</pre>",$Text); $Text=preg_replace("/\[emot\](.+?)\[\/emot\]/eis","emot('\\1')",$Text); $Text=preg_replace("/\[email\](.+?)\[\/email\]/is","<a href='mailto:\\1'>\\1</a>",$Text); $Text=preg_replace("/\[i\](.+?)\[\/i\]/is","<i>\\1</i>",$Text); $Text=preg_replace("/\[u\](.+?)\[\/u\]/is","<u>\\1</u>",$Text); $Text=preg_replace("/\[b\](.+?)\[\/b\]/is","<b>\\1</b>",$Text); $Text=preg_replace("/\[quote\](.+?)\[\/quote\]/is","<blockquote>引用:<div style='border:1px solid silver;background:#EFFFDF;color:#393939;padding:5px' >\\1</div></blockquote>", $Text); $Text=preg_replace("/\[sig\](.+?)\[\/sig\]/is","<div style='text-align: left; color: darkgreen; margin-left: 5%'><br><br>--------------------------<br>\\1<br>--------------------------</div>", $Text); return $Text; } function getModuleName($mid) { $dao = D('Module'); $mcnname = $dao->find('id='."'$mid'",'modcnname'); return $mcnname->modcnname; } function getModuleId($module) { $dao = D('Module'); $mid = $dao->find('modname='."'$module'",'id'); return $mid->id; } function safeEncoding($string,$outEncoding = 'UTF-8') { $encoding = "UTF-8"; for($i=0;$i<strlen($string);$i++) { if(ord($string{$i})<128) continue; if((ord($string{$i})&224)==224) { $char = $string{++$i}; if((ord($char)&128)==128) { $char = $string{++$i}; if((ord($char)&128)==128) { $encoding = "UTF-8"; break; } } } if((ord($string{$i})&192)==192) { $char = $string{++$i}; if((ord($char)&128)==128) { $encoding = "GB2312"; break; } } } if(strtoupper($encoding) == strtoupper($outEncoding)) return $string; else return iconv($encoding,$outEncoding,$string); } function emot($emot){ return '<img src="'.WEB_PUBLIC_URL.'/Images/emot/'.$emot.'.gif" align="absmiddle" style="border:none;margin:0px 1px">'; } function byte_format($input, $dec=0) { $prefix_arr = array("B", "K", "M", "G", "T"); $value = round($input, $dec); $i=0; while ($value>1024) { $value /= 1024; $i++; } $return_str = round($value, $dec).$prefix_arr[$i]; return $return_str; } function showExt($ext,$pic=false) { static $_extPic = array( 'dir'=>"folder.gif", 'doc'=>'msoffice.gif', 'rar'=>'rar.gif', 'zip'=>'zip.gif', 'txt'=>'text.gif', 'pdf'=>'pdf.gif', 'html'=>'html.gif', 'png'=>'image.gif', 'gif'=>'image.gif', 'jpg'=>'image.gif', 'php'=>'text.gif', ); static $_extTxt = array( 'dir'=>'文件夹', 'jpg'=>'JPEG图象', ); if($pic) { if(array_key_exists(strtolower($ext),$_extPic)) { $show = "<IMG SRC='".WEB_PUBLIC_URL."/Images/extension/".$_extPic[strtolower($ext)]."' BORDER='0' alt='' align='absmiddle'>"; }else{ $show = "<IMG SRC='".WEB_PUBLIC_URL."/Images/extension/common.gif' WIDTH='16' HEIGHT='16' BORDER='0' alt='文件' align='absmiddle'>"; } }else{ if(array_key_exists(strtolower($ext),$_extTxt)) { $show = $_extTxt[strtolower($ext)]; }else{ $show = $ext?$ext:'文件夹'; } } return $show; } ?><?php
return array (
  'dispatch_on' => true,
  'dispatch_name' => 'Think',
  'url_model' => 1,
  'path_model' => 2,
  'path_depr' => '/',
  'router_on' => true,
  'component_depr' => '_',
  'component_type' => 1,
  'url_case_insensitive' => false,
  'url_auto_redirect' => true,
  'check_file_case' => false,
  'web_log_record' => false,
  'log_file_size' => 2097152,
  'think_plugin_on' => true,
  'app_auto_setup' => false,
  'limit_resflesh_on' => false,
  'limit_reflesh_times' => 2,
  'debug_mode' => false,
  'error_message' => '您浏览的页面暂时发生了错误！请稍后再试～',
  'error_page' => '',
  'show_error_msg' => true,
  'var_pathinfo' => 's',
  'var_module' => 'm',
  'var_action' => 'a',
  'var_router' => 'r',
  'var_file' => 'f',
  'var_page' => 'p',
  'var_language' => 'l',
  'var_template' => 't',
  'var_ajax_submit' => 'ajax',
  'var_resflesh' => 'h',
  'default_module' => 'Index',
  'default_action' => 'index',
  'module_redirect' => '',
  'action_redirect' => '',
  'tmpl_cache_on' => false,
  'tmpl_cache_time' => -1,
  'tmpl_switch_on' => true,
  'default_template' => 'lite',
  'template_suffix' => '.html',
  'cachfile_suffix' => '.php',
  'template_charset' => 'utf-8',
  'output_charset' => 'utf-8',
  'default_layout' => 'Layout:index',
  'contr_class_prefix' => '',
  'contr_class_suffix' => 'Action',
  'action_prefix' => '',
  'action_suffix' => '',
  'model_class_prefix' => '',
  'model_class_suffix' => 'Model',
  'table_name_identify' => true,
  'default_model_app' => '@',
  'html_file_suffix' => '.html',
  'html_cache_on' => false,
  'html_cache_time' => 600,
  'html_read_type' => 1,
  'html_url_suffix' => '.shtml',
  'lang_switch_on' => false,
  'lang_cache_on' => false,
  'default_language' => 'zh-cn',
  'time_zone' => 'PRC',
  'user_auth_on' => false,
  'user_auth_type' => 1,
  'user_auth_key' => 'uid',
  'admin_auth_key' => 'administrator',
  'user_auth_model' => 'User',
  'auth_pwd_encoder' => 'md5',
  'user_auth_provider' => 'DaoAuthentictionProvider',
  'user_auth_gateway' => '/Public/login',
  'not_auth_module' => 'Public',
  'require_auth_module' => '',
  'not_auth_action' => '',
  'require_auth_action' => '',
  'guest_auth_on' => true,
  'guest_auth_id' => 0,
  'rbac_error_page' => '',
  'session_name' => 'ThinkID',
  'session_path' => '',
  'session_type' => 'File',
  'session_expire' => '300000',
  'session_table' => 'thinkcms_session',
  'session_callback' => '',
  'db_charset' => 'utf8',
  'db_deploy_type' => 0,
  'sql_debug_log' => false,
  'db_fields_cache' => false,
  'sql_mode' => '',
  'fields_depr' => ',',
  'table_describe_sql' => '',
  'fetch_tables_sql' => '',
  'db_trigger_prefix' => 'tr_',
  'db_sequence_prefix' => 'seq_',
  'db_case_lower' => true,
  'data_cache_time' => -1,
  'data_cache_compress' => false,
  'data_cache_check' => false,
  'data_cache_type' => 'File',
  'data_cache_subdir' => false,
  'data_cache_table' => 'think_cache',
  'cache_serial_header' => '<?php
//',
  'cache_serial_footer' => '
?>',
  'share_mem_size' => 1048576,
  'action_cache_on' => false,
  'show_run_time' => false,
  'show_adv_time' => false,
  'show_db_times' => false,
  'show_cache_times' => false,
  'show_use_mem' => false,
  'show_page_trace' => false,
  'tmpl_engine_type' => 'Think',
  'tmpl_deny_func_list' => 'echo,exit',
  'tmpl_l_delim' => '{',
  'tmpl_r_delim' => '}',
  'taglib_begin' => '<',
  'taglib_end' => '>',
  'tag_nested_level' => 3,
  'cookie_expire' => 3600,
  'cookie_domain' => '',
  'cookie_path' => '/',
  'cookie_prefix' => '',
  'cookie_secret_key' => '',
  'page_numbers' => 5,
  'list_numbers' => 20,
  'ajax_return_type' => 'JSON',
  'data_result_type' => 1,
  'auto_load_path' => 'Think.Util.',
  'auto_load_class' => '',
  'callback_load_path' => '',
  'upload_file_rule' => 'uniqid',
  'like_match_fields' => '',
  'action_jump_tmpl' => 'Public:success',
  'action_404_tmpl' => 'Public:404',
  'token_on' => true,
  'token_name' => 'think_html_token',
  'token_type' => 'md5',
  'app_domain_deploy' => false,
  'db_type' => 'mysql',
  'db_host' => 'localhost',
  'db_name' => 'thinkcms',
  'db_user' => 'root',
  'db_pwd' => '',
  'db_port' => '',
  'db_prefix' => 'thinkcms_',
  'site_title' => 'ThinkCMS',
  'site_name' => 'ThinkCMS',
  'site_description' => '中小企业建站最优解决方案',
  'site_icp' => '备案中',
  'site_host' => 'http://www.tpcms.cn',
  'member_system' => true,
  'allow_reg' => true,
  'reg_group' => 2,
  'passport' => 0,
  'passport_type' => 'PHPWind',
  'pw_passport_key' => '',
  'passport_url' => '',
  'think_html_token' => '',
  'user_uploads' => './UserUploads/',
);
?>